<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小星星学习打卡</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600&display=swap" rel="stylesheet">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#6c5ce7">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
</head>
<body>
    <div class="container">
        <header>
            <h1>小星星学习打卡</h1>
            <div class="date-selector">
                <button id="prev-date">◀</button>
                <input type="date" id="current-date">
                <button id="next-date">▶</button>
                <button id="today-btn">今天</button>
            </div>
            <div class="star-container">
                <div class="star-pool">
                    <span class="star-icon">⭐</span>
                    <span id="total-stars">0</span>
                </div>
                <button id="view-stars-history-btn" class="small-btn">查看记录</button>
            </div>
        </header>

        <main>
            <section class="tasks-section">
                <div class="section-header">
                    <h2 id="tasks-date-title">今日任务</h2>
                    <button id="view-calendar-btn">查看日历</button>
                </div>
                <div class="tabs">
                    <button class="tab-btn active" data-tab="daily-tasks">日常任务</button>
                    <button class="tab-btn" data-tab="recurring-tasks">周期目标</button>
                </div>
                <div class="tab-content active" id="daily-tasks">
                    <div class="task-list" id="task-list">
                        <!-- 任务列表将通过 JavaScript 动态生成 -->
                    </div>
                    <div class="add-task">
                        <input type="text" id="new-task-name" placeholder="输入新任务名称">
                        <input type="number" id="new-task-stars" placeholder="星星数" min="1" max="10">
                        <button id="add-task-btn">添加任务</button>
                    </div>
                </div>
                <div class="tab-content" id="recurring-tasks">
                    <div class="task-list" id="recurring-task-list">
                        <!-- 周期任务列表将通过 JavaScript 动态生成 -->
                    </div>
                    <div class="add-task">
                        <input type="text" id="new-recurring-task-name" placeholder="输入周期目标名称">
                        <input type="number" id="new-recurring-task-stars" placeholder="星星数" min="1" max="10">
                        <button id="add-recurring-task-btn">添加周期目标</button>
                    </div>
                </div>
            </section>

            <section class="bonus-section">
                <h2>家长奖励</h2>
                <div class="bonus-stars">
                    <input type="number" id="bonus-stars" placeholder="额外奖励星星数" min="1">
                    <input type="text" id="bonus-reason" placeholder="奖励理由">
                    <button id="add-bonus-btn">奖励星星</button>
                </div>
            </section>

            <section class="wishes-section">
                <div class="section-header">
                    <h2>星愿池</h2>
                    <button id="view-archive-btn">查看已兑换</button>
                </div>
                <div class="wish-list" id="wish-list">
                    <!-- 星愿列表将通过 JavaScript 动态生成 -->
                </div>
                <div class="add-wish">
                    <input type="text" id="new-wish-name" placeholder="输入新星愿名称">
                    <input type="number" id="new-wish-stars" placeholder="单个星愿所需星星数" min="1">
                    <button id="add-wish-btn">添加星愿</button>
                </div>
            </section>
            
            <section class="reset-section">
                <div class="section-header">
                    <h2>系统设置</h2>
                </div>
                <div class="reset-container">
                    <button id="show-reset-btn" class="danger-btn">初始化应用</button>
                    <div id="reset-confirmation" class="hidden">
                        <p>请回答以下算式验证，答案正确才能初始化：</p>
                        <div class="math-challenge">
                            <span id="math-question">12 + 34 = ?</span>
                            <input type="number" id="math-answer" placeholder="输入答案">
                        </div>
                        <div class="reset-actions">
                            <button id="confirm-reset-btn" class="danger-btn">确认初始化</button>
                            <button id="cancel-reset-btn">取消</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- 日历模态框 -->
    <div id="calendar-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>打卡日历</h2>
            <div class="calendar-container">
                <div class="calendar-header">
                    <button id="prev-month">◀</button>
                    <h3 id="calendar-month-year">2023年12月</h3>
                    <button id="next-month">▶</button>
                </div>
                <div class="calendar-grid">
                    <div class="calendar-weekdays">
                        <div>日</div><div>一</div><div>二</div><div>三</div><div>四</div><div>五</div><div>六</div>
                    </div>
                    <div id="calendar-days" class="calendar-days">
                        <!-- 日历天数将通过 JavaScript 动态生成 -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 任务详情模态框 -->
    <div id="task-detail-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2 id="task-detail-date">2023年12月1日任务</h2>
            <div id="task-detail-list">
                <!-- 任务详情将通过 JavaScript 动态生成 -->
            </div>
        </div>
    </div>

    <!-- 编辑任务模态框 -->
    <div id="edit-task-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>编辑任务</h2>
            <div class="edit-form">
                <input type="text" id="edit-task-name" placeholder="任务名称">
                <input type="number" id="edit-task-stars" placeholder="星星数" min="1" max="10">
                <input type="hidden" id="edit-task-id">
                <div class="edit-buttons">
                    <button id="update-task-btn">更新</button>
                    <button id="delete-task-btn" class="delete-btn">删除</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 编辑星愿模态框 -->
    <div id="edit-wish-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>编辑星愿</h2>
            <div class="edit-form">
                <input type="text" id="edit-wish-name" placeholder="星愿名称">
                <input type="number" id="edit-wish-stars" placeholder="单个星愿所需星星数" min="1">
                <input type="hidden" id="edit-wish-id">
                <div class="edit-buttons">
                    <button id="update-wish-btn">更新</button>
                    <button id="delete-wish-btn" class="delete-btn">删除</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 兑换星愿模态框 -->
    <div id="redeem-wish-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>兑换星愿</h2>
            <div class="redeem-form">
                <p id="redeem-wish-name">星愿名称</p>
                <div class="redeem-info">
                    <p>单个星愿所需星星数：<span id="redeem-wish-stars">5</span></p>
                    <p>当前星星数量：<span id="redeem-current-stars">10</span></p>
                </div>
                <div class="redeem-quantity">
                    <label for="redeem-quantity-input">兑换数量：</label>
                    <div class="quantity-selector">
                        <button id="decrease-quantity">-</button>
                        <input type="number" id="redeem-quantity-input" value="1" min="1">
                        <button id="increase-quantity">+</button>
                    </div>
                </div>
                <p>总计需要星星数：<span id="redeem-total-stars">5</span></p>
                <input type="hidden" id="redeem-wish-id">
                <div class="redeem-buttons">
                    <button id="confirm-redeem-btn">确认兑换</button>
                    <button id="cancel-redeem-btn">取消</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 编辑周期目标模态框 -->
    <div id="edit-recurring-task-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>编辑周期目标</h2>
            <div class="edit-form">
                <input type="text" id="edit-recurring-task-name" placeholder="周期目标名称">
                <input type="number" id="edit-recurring-task-stars" placeholder="星星数" min="1" max="10">
                <input type="hidden" id="edit-recurring-task-id">
                <div class="edit-buttons">
                    <button id="update-recurring-task-btn">更新</button>
                    <button id="delete-recurring-task-btn" class="delete-btn">删除</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 已兑换心愿归档模态框 -->
    <div id="wish-archive-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>已兑换心愿</h2>
            <div id="wish-archive-list" class="archive-list">
                <!-- 已兑换心愿列表将通过 JavaScript 动态生成 -->
            </div>
        </div>
    </div>
    
    <!-- 星星修改记录模态框 -->
    <div id="stars-history-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>星星修改记录</h2>
            <div id="stars-history-list" class="archive-list">
                <!-- 星星修改记录列表将通过 JavaScript 动态生成 -->
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
